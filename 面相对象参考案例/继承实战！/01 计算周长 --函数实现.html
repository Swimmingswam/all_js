<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
</head>

<body>
</body>
</html>
<script>

//但这种实现方式有着不少缺陷：
//
//    要增加更多形状的周长计算时，必须改动computePerimeter函数，可扩展性差；
//    算法集中在computePerimeter函数，随着形状越来越多，这个函数会越来越庞大，最终变得难以维护；
//    computePerimeter通过shape.type判定形状类型，但如果type属性值错误（如拼错或大小写错误），就无法计算出正确的周长值


var rectangle = {
    name: '长方形1',
    type: 'rectangle',
    length: 5,  // 长
    width: 10   // 宽
};
var square = {
    name: '正方形1',
    type: 'square',
    length: 5  // 边长
};
var circle = {
    name: '圆形1',
    type: 'circle',
    radius: 5  // 半径
};


alert(computePerimeter(rectangle));
alert(computePerimeter(square));
alert(computePerimeter(circle));


function computePerimeter(shape) {
    var result;
    switch (shape.type) {
        case 'rectangle':
        	// 矩形周长：(长+宽)*2
        	result = (shape.length + shape.width) * 2;
        	break;
        case 'square':
        	// 正方形周长：边长*4
        	result = shape.length * 4;
        	break;
        case 'circle':
        	// 圆形周长：2*PI*半径
        	result = Math.floor(2 * Math.PI * shape.radius);
        	break;
    }

    return shape.name + '的周长是' + result;
}











//构造器定义shape属性
var sharp = function(name){
	this.name = name;
}
//原型定义shape方法
sharp.prototype = {
		getName : function(){
				return this.name;
			}
		,zhouchang : function(){
			}
	};

//每个图形都有自己计算周长的算式，分别重写function zhouchang（）{}
var Rectangle = function(name,length,width){
	sharp.call(this, name);
	this.length =length;
	this.width = width;
}

Rectangle.prototype = new sharp();
Rectangle.prototype.zhouchang = function(){
	 return (this.length + this.width) * 2;
}

function computezhouchang(shape) {
    alert( shape.getName() + '的周长是' + shape.zhouchang() );
}
//长方形
var rectangle = new Rectangle('矩形',10,20);
computezhouchang(rectangle);

//正方形
var square=function(name,length){
	sharp.call(this, name);
	this.length =length;
}
square.prototype=new sharp();
square.prototype.zhouchang=function(){
		return 4*this.length;
	}
var square = new square('正方形',20);
computezhouchang(square);

	//圆形
	var circle=function(name,radius){
		sharp.call(this, name);
		this.radius =radius;
	}
	circle.prototype=new sharp();
	circle.prototype.zhouchang=function(){
		return Math.floor(2 * Math.PI * this.radius);
	}
	var circle=new circle("圆形",5);
computezhouchang(circle);
</script>